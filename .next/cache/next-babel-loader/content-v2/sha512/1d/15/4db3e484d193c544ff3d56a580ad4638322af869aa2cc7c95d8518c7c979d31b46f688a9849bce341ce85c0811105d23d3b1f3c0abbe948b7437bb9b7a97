{"ast":null,"code":"var _jsxFileName = \"/home/m00m/Blockhainlearn/fyp/pages/campaigns/show.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport web3 from \"../../ethereum/web3\";\nimport Campaign from \"../../ethereum/campaign\";\nimport Layout from \"../../components/Layout\";\nimport { Link } from \"../../routes\";\nimport { Tab, Container, Card, Table, Button, Message } from \"semantic-ui-react\";\nimport Detail from \"../../components/view/detail\";\nimport Request from \"../../components/view/request\";\nimport RequestRow from \"../../components/RequestRow\";\n\nclass CampaignShow extends Component {\n  static async getInitialProps(props) {\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummary().call();\n    const manager = await campaign.methods.organiser().call();\n    const donaterCount = await campaign.methods.donaterCount().call();\n    const requestCount = await campaign.methods.requestCount().call();\n    const requests = await Promise.all(Array(parseInt(requestCount)).fill().map((element, index) => {\n      return campaign.methods.requests(index).call();\n    }));\n    return {\n      donaterCount,\n      requestCount,\n      requests,\n      address: props.query.address,\n      minimumContribution: summary[0],\n      balance: summary[1],\n      donaterCount: summary[2],\n      organizer: summary[3]\n    };\n  }\n\n  renderRow() {\n    return this.props.requests.map((request, index) => {\n      return __jsx(RequestRow, {\n        onRequestsUpdate: this.onRequestsUpdate,\n        request: request,\n        key: index,\n        id: index,\n        address: this.props.address,\n        approversCount: this.props.donaterCount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      });\n    });\n  }\n\n  renderShow() {\n    const panes = [{\n      menuItem: \"Details\",\n      render: () => __jsx(Detail, {\n        address: this.props.address,\n        minimumContribution: this.props.minimumContribution,\n        balance: this.props.balance,\n        donaterCount: this.props.donaterCount,\n        organizer: this.props.organizer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      })\n    }, {\n      menuItem: \"Requests\",\n      render: () => __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }\n      }, __jsx(Table, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }, __jsx(Table.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }\n      }, __jsx(Table.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }, \"ID\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 19\n        }\n      }, \"Description\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 19\n        }\n      }, \"Amount\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 19\n        }\n      }, \"Recipient\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 19\n        }\n      }, \"Approval Count\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }\n      }, \"Approve\"), __jsx(Table.HeaderCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 19\n        }\n      }, \"Finalize\"))), __jsx(Table.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }\n      }, this.renderRow())), __jsx(Link, {\n        route: `/campaigns/${this.props.address}/requests/new`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }\n      }, __jsx(Button, {\n        content: \"Add Request\",\n        primary: true,\n        floated: \"right\",\n        style: {\n          borderRadius: \"61px\",\n          width: \"200px\"\n        },\n        size: \"big\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }))))\n    }];\n    return panes;\n  }\n\n  render() {\n    console.log(this.props.requestCount);\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, \"Show the Campaign\"), __jsx(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, __jsx(Tab, {\n      menu: {\n        secondary: true,\n        pointing: true\n      },\n      panes: this.renderShow(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default CampaignShow;","map":{"version":3,"sources":["/home/m00m/Blockhainlearn/fyp/pages/campaigns/show.js"],"names":["React","Component","web3","Campaign","Layout","Link","Tab","Container","Card","Table","Button","Message","Detail","Request","RequestRow","CampaignShow","getInitialProps","props","campaign","query","address","summary","methods","getSummary","call","manager","organiser","donaterCount","requestCount","requests","Promise","all","Array","parseInt","fill","map","element","index","minimumContribution","balance","organizer","renderRow","request","onRequestsUpdate","renderShow","panes","menuItem","render","borderRadius","width","console","log","secondary","pointing"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport web3 from \"../../ethereum/web3\";\nimport Campaign from \"../../ethereum/campaign\";\nimport Layout from \"../../components/Layout\";\nimport { Link } from \"../../routes\";\nimport {\n  Tab,\n  Container,\n  Card,\n  Table,\n  Button,\n  Message\n} from \"semantic-ui-react\";\nimport Detail from \"../../components/view/detail\";\nimport Request from \"../../components/view/request\";\n\nimport RequestRow from \"../../components/RequestRow\";\n\nclass CampaignShow extends Component {\n  static async getInitialProps(props) {\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummary().call();\n    const manager = await campaign.methods.organiser().call();\n\n    const donaterCount = await campaign.methods.donaterCount().call();\n    const requestCount = await campaign.methods.requestCount().call();\n    const requests = await Promise.all(\n      Array(parseInt(requestCount))\n        .fill()\n        .map((element, index) => {\n          return campaign.methods.requests(index).call();\n        })\n    );\n\n    return {\n      donaterCount,\n      requestCount,\n      requests,\n      address: props.query.address,\n      minimumContribution: summary[0],\n      balance: summary[1],\n      donaterCount: summary[2],\n      organizer: summary[3]\n    };\n  }\n  renderRow() {\n    return this.props.requests.map((request, index) => {\n      return (\n        <RequestRow\n          onRequestsUpdate={this.onRequestsUpdate}\n          request={request}\n          key={index}\n          id={index}\n          address={this.props.address}\n          approversCount={this.props.donaterCount}\n        />\n      );\n    });\n  }\n\n  renderShow() {\n    const panes = [\n      {\n        menuItem: \"Details\",\n        render: () => (\n          <Detail\n            address={this.props.address}\n            minimumContribution={this.props.minimumContribution}\n            balance={this.props.balance}\n            donaterCount={this.props.donaterCount}\n            organizer={this.props.organizer}\n          />\n        )\n      },\n      {\n        menuItem: \"Requests\",\n        render: () => (\n          <div>\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>ID</Table.HeaderCell>\n                  <Table.HeaderCell>Description</Table.HeaderCell>\n                  <Table.HeaderCell>Amount</Table.HeaderCell>\n                  <Table.HeaderCell>Recipient</Table.HeaderCell>\n                  <Table.HeaderCell>Approval Count</Table.HeaderCell>\n                  <Table.HeaderCell>Approve</Table.HeaderCell>\n                  <Table.HeaderCell>Finalize</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>{this.renderRow()}</Table.Body>\n            </Table>\n            <Link route={`/campaigns/${this.props.address}/requests/new`}>\n              <a>\n                <Button\n                  content=\"Add Request\"\n                  primary\n                  floated=\"right\"\n                  style={{\n                    borderRadius: \"61px\",\n                    width: \"200px\"\n                  }}\n                  size=\"big\"\n                />\n              </a>\n            </Link>\n          </div>\n        )\n      }\n    ];\n\n    return panes;\n  }\n  render() {\n    console.log(this.props.requestCount);\n    return (\n      <Layout>\n        <h3>Show the Campaign</h3>\n\n        <Container>\n          <Tab\n            menu={{ secondary: true, pointing: true }}\n            panes={this.renderShow()}\n          />\n        </Container>\n      </Layout>\n    );\n  }\n}\n\nexport default CampaignShow;\n"]},"metadata":{},"sourceType":"module"}